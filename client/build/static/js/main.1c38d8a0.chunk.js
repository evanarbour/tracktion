(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{163:function(e,n,t){},180:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(40),i=t.n(r),o=(t(163),t(20)),s=t(97),l=t(22),d=t(140),j=t(235),b=t(238),m=t(233),u=t(138),O=t(56),p=t(141),h=t(17),x="ADD_HABIT",g="SET_USER",v={username:"",email:"",goals:[],habits:[]},f=Object(p.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case x:return Object(o.a)(Object(o.a)({},e),{},{habits:[].concat(Object(h.a)(e.habits),[n.payload])});case g:return Object(o.a)(Object(o.a)({},e),n.payload);default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),w=f,y=t(1);var S=function(){return Object(y.jsx)("div",{children:"NAVBAR TEXT GOES HERE!"})};var D,k,_,$,E,A,I,C,T,G,W,H=function(){return Object(y.jsx)("footer",{children:"FOOTER TEXT GOES HERE!"})},N=t(6),R=t(34),U=t.n(R),B=t(49),X=t(12),F=t(237),L=t(234),V=t(245),q=t(241),P=t(247),z=t(244),J=t(139),Q=t(243),M=t(249),K=t(24),Y=t(236),Z=Object(Y.a)(D||(D=Object(K.a)(["\nmutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n        token\n        user {\n            _id\n            username\n                email\n                habits {\n                    _id\n                    name\n                    tracktionDays\n                    createdAt\n                }\n                sharedHabits {\n                    _id\n                    name\n                    tracktionDays\n                    createdAt\n                }\n                goals {\n                    _id\n                    name\n                    goalSteps {\n                        _id\n                        name\n                        completed\n                    }\n                    goalEndDate\n                    createdAt\n                }\n        }\n    }\n}\n"]))),ee=Object(Y.a)(k||(k=Object(K.a)(["\nmutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n        token\n        user {\n            _id\n            username\n        }\n    }\n}\n"]))),ne=(Object(Y.a)(_||(_=Object(K.a)(["\n    mutation addHabit($name: String!) {\n        addHabit(name: $name) {\n            _id\n            name\n            tracktionDays\n            createdAt\n        }\n    }\n"]))),Object(Y.a)($||($=Object(K.a)(["\n    mutation addGoal($name: String!, $steps: [String]!, $endDate: Date) {\n        addGoal(name: $name, steps: $steps, endDate: $endDate) {\n            _id\n            name\n            goalSteps {\n                _id\n                name\n                completed\n            }\n            goalEndDate\n            createdAt\n        }\n    }\n"])))),te=Object(Y.a)(E||(E=Object(K.a)(["\n    mutation addGoalStep($id: ID!, $name: String!) {\n        addGoalStep(goalId: $id, name: $name) {\n            _id\n            name\n            goalSteps {\n                _id\n                name\n                completed\n            }\n            goalEndDate\n            createdAt\n        }\n    }\n"]))),ae=(Object(Y.a)(A||(A=Object(K.a)(["\n    mutation updateHabit($id: ID!, $input: TracktionDaysInput) {\n        updateHabit(habitId: $id, input: $input) {\n            _id\n            name\n            tracktionDays\n            createdAt\n        }\n    }\n"]))),Object(Y.a)(I||(I=Object(K.a)(["\n    mutation updateGoal($id: ID!, $endDate: Date) {\n        updateGoal(goalId: $id, endDate: $endDate) {\n            _id\n            name\n            goalSteps {\n                _id\n                name\n                completed\n            }\n            goalEndDate\n            createdAt\n        }\n    }\n"]))),Object(Y.a)(C||(C=Object(K.a)(["\n    mutation updateGoalStep($id: ID!, $completed: Boolean!) {\n        updateGoalStep(goalStepId: $id, completed: $completed) {\n            _id\n            name\n            completed\n        }\n    }\n"]))),Object(Y.a)(T||(T=Object(K.a)(["\n    mutation removeHabit($id: ID!) {\n        removeHabit(habitId: $id) {\n            _id\n            name\n            tracktionDays\n            createdAt\n        }\n    }\n"]))),Object(Y.a)(G||(G=Object(K.a)(["\n    mutation removeGoal($id: ID!) {\n        removeGoal(goalId: $id) {\n            _id\n            name\n            goalSteps {\n                _id\n                name\n                completed\n            }\n            goalEndDate\n            createdAt\n        }\n    }\n"]))),Object(Y.a)(W||(W=Object(K.a)(["\n    mutation removeGoalStep($id: ID!) {\n        removeGoalStep(goalStepId: $id) {\n            _id\n            name\n            completed\n        }\n    }\n"]))),t(91)),ce=t(92),re=t(110),ie=t.n(re),oe=new(function(){function e(){Object(ae.a)(this,e)}return Object(ce.a)(e,[{key:"getProfile",value:function(){return ie()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return ie()(e).exp<Date.now()/1e3}catch(n){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e)}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}());var se=Object(J.a)();function le(){var e=Object(a.useState)({email:"",password:""}),n=Object(X.a)(e,2),t=n[0],c=n[1],r=Object(M.a)(Z),i=Object(X.a)(r,2),s=i[0],l=(i[1].error,Object(O.b)()),d=(Object(O.c)((function(e){return e})),function(){var e=Object(B.a)(U.a.mark((function e(n){var a,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,s({variables:{email:t.email,password:t.password}});case 4:a=e.sent,c=a.data.login.token,oe.login(c),l({type:g,payload:a.data.login.user}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}()),j=function(e){var n=e.target,a=n.name,r=n.value;c(Object(o.a)(Object(o.a)({},t),{},Object(N.a)({},a,r)))};return Object(y.jsxs)(Q.a,{theme:se,children:[Object(y.jsx)(V.a,{href:"/signup",children:"Click here to Sign Up!"}),Object(y.jsx)(P.a,{component:"form",onSubmit:d,noValidate:!0,sx:{mt:1},children:Object(y.jsxs)(q.a,{container:!0,alignItems:"center",justifyContent:"center",direction:"column",children:[Object(y.jsx)(q.a,{item:!0,children:Object(y.jsx)(L.a,{id:"email",name:"email",label:"email",type:"email",value:t.email,onChange:j})}),Object(y.jsx)(q.a,{item:!0,children:Object(y.jsx)(L.a,{id:"password",name:"password",label:"password",type:"password",value:t.password,onChange:j})}),Object(y.jsx)(F.a,{variant:"contained",color:"primary",type:"submit",children:"Sign In"})]})})]})}var de=t(248);var je=Object(J.a)();function be(){var e=Object(a.useState)({username:"",email:"",password:""}),n=Object(X.a)(e,2),t=n[0],c=n[1],r=Object(M.a)(ee),i=Object(X.a)(r,1)[0],s=function(){var e=Object(B.a)(U.a.mark((function e(n){var a,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,i({variables:{username:t.username,email:t.email,password:t.password}});case 4:a=e.sent,c=a.data.addUser.token,oe.login(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),l=function(e){var n=e.target,a=n.name,r=n.value;c(Object(o.a)(Object(o.a)({},t),{},Object(N.a)({},a,r)))};return Object(y.jsx)(Q.a,{theme:je,children:Object(y.jsxs)(de.a,{component:"main",maxWidth:"xs",children:[Object(y.jsx)(V.a,{href:"/signin",children:"Already have an account? Login"}),Object(y.jsx)("form",{onSubmit:s,children:Object(y.jsxs)(q.a,{container:!0,alignItems:"center",justifyContent:"center",direction:"column",children:[Object(y.jsx)(L.a,{id:"username",name:"username",label:"username",type:"text",value:t.username,onChange:l}),Object(y.jsx)(L.a,{id:"email",name:"email",label:"email",type:"text",value:t.email,onChange:l}),Object(y.jsx)(L.a,{id:"password",name:"password",label:"password",type:"password",value:t.password,onChange:l}),Object(y.jsx)(F.a,{variant:"contained",color:"primary",type:"submit",children:"Sign In"})]})})]})})}var me,ue,Oe=function(){},pe=t(239),he=t(230),xe=(Object(Y.a)(me||(me=Object(K.a)(["\n    query getUser($username: String!) {\n        getUser(username: $username) {\n            _id\n            username\n            email\n            habits {\n                _id\n                name\n                tracktionDays\n                createdAt\n            }\n            sharedHabits {\n                _id\n                name\n                tracktionDays\n                createdAt\n            }\n            goals {\n                _id\n                name\n                goalSteps {\n                    _id\n                    name\n                    completed\n                }\n                goalEndDate\n                createdAt\n            }\n        }\n    }\n"]))),Object(Y.a)(ue||(ue=Object(K.a)(["\n{\n    me {\n        _id\n            username\n            email\n            habits {\n                _id\n                name\n                tracktionDays\n                createdAt\n            }\n            sharedHabits {\n                _id\n                name\n                tracktionDays\n                createdAt\n            }\n            goals {\n                _id\n                name\n                goalSteps {\n                    _id\n                    name\n                    completed\n                }\n                goalEndDate\n                createdAt\n            }\n    }\n}"])))),ge=Object(J.a)();function ve(){var e=Object(a.useState)({name:""}),n=Object(X.a)(e,2),t=n[0],c=n[1],r=Object(O.b)();return Object(y.jsx)(Q.a,{theme:ge,children:Object(y.jsx)(de.a,{component:"main",maxWidth:"lg",children:Object(y.jsx)("form",{onSubmit:function(){r({type:x,payload:{newHabit:t}})},children:Object(y.jsxs)(q.a,{container:!0,alignItems:"center",justifyContent:"center",direction:"column",children:[Object(y.jsx)(q.a,{item:!0,children:Object(y.jsx)(L.a,{id:"habitadd-input",name:"name",label:"Enter a new habit..",type:"text",value:t.name,onChange:function(e){var n=e.target,a=n.name,r=n.value;c(Object(o.a)(Object(o.a)({},t),{},Object(N.a)({},a,r)))}})}),Object(y.jsx)(F.a,{variant:"contained",color:"primary",type:"submit",children:"ADD HABIT"})]})})})})}var fe=Object(J.a)(),we=function(e){e.user;return Object(y.jsx)(Q.a,{theme:fe,children:Object(y.jsxs)(de.a,{component:"main",maxWidth:"lg",children:[Object(y.jsx)(he.a,{}),Object(y.jsx)(q.a,{container:!0,spacing:2,children:Object(y.jsx)(q.a,{item:!0,xs:5})})]})})},ye=t(232),Se=t(231),De=t(242),ke=t(107),_e=t.n(ke),$e=Object(J.a)(),Ee=function(){var e=Object(a.useState)({name:"",steps:[],endDate:""}),n=Object(X.a)(e,2),t=n[0],c=n[1],r=Object(M.a)(ne,{update:function(e,n){var t=n.data.addGoal;try{var a=e.readQuery({query:xe}).goals;e.writeQuery({query:xe,data:{goals:[t].concat(Object(h.a)(a))}})}catch(c){console.error(c)}}}),i=Object(X.a)(r,2),s=i[0],l=(i[1].error,function(){var e=Object(B.a)(U.a.mark((function e(n){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,s({variables:Object(o.a)({},t)});case 4:a=e.sent,a.data,c({name:"",steps:[],endDate:""}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}()),d=function(e){var n=e.target,a=n.name,r=n.value;c("steps"===a?Object(o.a)(Object(o.a)({},t),{},Object(N.a)({},a,[r])):Object(o.a)(Object(o.a)({},t),{},Object(N.a)({},a,r)))};return Object(y.jsx)(Q.a,{theme:$e,children:Object(y.jsxs)(de.a,{component:"main",maxWidth:"lg",children:[Object(y.jsx)(he.a,{}),Object(y.jsx)(Se.a,{dateAdapter:ye.a,children:"..."}),Object(y.jsxs)(P.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(y.jsx)(De.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(y.jsx)(_e.a,{})}),Object(y.jsx)(z.a,{component:"h1",variant:"h5",children:"Add New Goal"}),Object(y.jsxs)(P.a,{component:"form",onSubmit:l,noValidate:!0,sx:{mt:1},children:[Object(y.jsx)(L.a,{margin:"normal",fullWidth:!0,id:"name",placeholder:"New Goal",value:t.name,onChange:d,name:"name",autoComplete:"name",autoFocus:!0}),Object(y.jsx)(L.a,{margin:"normal",fullWidth:!0,id:"date",placeholder:"Goal End Date",value:t.endDate,onChange:d,name:"endDate",autoComplete:"endDate",autoFocus:!0}),Object(y.jsx)(L.a,{margin:"normal",fullWidth:!0,id:"goal",label:"First Step",value:t.steps,onChange:d,name:"steps",autoComplete:"steps",autoFocus:!0}),Object(y.jsx)(F.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Save Goal"})]})]})]})})},Ae=t(108),Ie=t.n(Ae),Ce=Object(J.a)(),Te=function(e){var n=e.goals,t=Object(a.useState)(""),c=Object(X.a)(t,2),r=(c[0],c[1],Object(M.a)(te)),i=Object(X.a)(r,2);i[0],i[1].error;return Object(y.jsx)(Q.a,{theme:Ce,children:Object(y.jsxs)(de.a,{component:"main",maxWidth:"lg",children:[Object(y.jsx)(he.a,{}),Object(y.jsxs)(P.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(y.jsx)(De.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(y.jsx)(Ie.a,{})}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{className:"text-primary",children:"goals"}),Object(y.jsx)("div",{className:"flex-row justify-space-between my-4",children:n&&n.map((function(e){return Object(y.jsx)("div",{className:"col-12 col-xl-6",children:Object(y.jsx)("div",{className:"card mb-3",children:Object(y.jsxs)("h4",{className:"card-header bg-dark text-light p-2 m-0",children:[e.name," ",Object(y.jsx)("br",{}),Object(y.jsxs)("span",{className:"text-white",style:{fontSize:"1rem"},children:["currently has ",e.steps," "]})]})})},e._id)}))})]})]})]})})},Ge=Object(J.a)(),We=function(){var e=Object(pe.a)(xe),n=e.loading,t=e.data,a=(null===t||void 0===t?void 0:t.user)||[];return console.log(t),Object(y.jsx)(Q.a,{theme:Ge,children:Object(y.jsxs)(de.a,{component:"main",maxWidth:"lg",children:[Object(y.jsx)(he.a,{}),Object(y.jsx)(q.a,{container:!0,sx:{textAlign:"left"},children:"tracktion"}),Object(y.jsxs)(q.a,{container:!0,spacing:2,sx:{justifyContent:"center",textAlign:"center"},children:[Object(y.jsxs)(q.a,{item:!0,xs:5,children:[Object(y.jsx)(P.a,{sx:{p:2,m:5,bgcolor:"primary.main",borderRadius:4},children:Object(y.jsx)(z.a,{component:"h1",variant:"h5",children:"Current Goals:"})}),Object(y.jsx)(P.a,{sx:{p:2,m:2,bgcolor:"#f5f5f5",borderRadius:4},children:Object(y.jsx)(F.a,{component:s.b,to:"/goals",color:"primary",children:n?Object(y.jsx)("h2",{children:" loading... "}):Object(y.jsx)(Te,{})})}),Object(y.jsx)(P.a,{sx:{p:2,m:2,bgcolor:"#f5f5f5",borderRadius:4},children:Object(y.jsx)(F.a,{children:n?Object(y.jsx)("h2",{children:" loading... "}):Object(y.jsx)(Te,{user:a})})}),Object(y.jsx)(P.a,{children:Object(y.jsx)(Ee,{})})]}),Object(y.jsxs)(q.a,{item:!0,xs:5,children:[Object(y.jsx)(P.a,{sx:{p:2,m:5,bgcolor:"primary.main",borderRadius:4},children:Object(y.jsx)(z.a,{component:"h1",variant:"h5",children:"Current Habits:"})}),Object(y.jsx)(P.a,{children:n?Object(y.jsx)("h2",{children:" loading... "}):Object(y.jsx)(we,{user:a})}),Object(y.jsx)(P.a,{children:Object(y.jsx)(ve,{})})]})]})]})})};function He(){return Object(y.jsxs)("div",{children:[Object(y.jsx)(Te,{}),Object(y.jsx)(Ee,{})]})}function Ne(){return Object(y.jsxs)("div",{children:[Object(y.jsx)(we,{}),Object(y.jsx)(ve,{})]})}var Re=Object(d.a)({uri:"/graphql"}),Ue=Object(u.a)((function(e,n){var t=n.headers,a=localStorage.getItem("id_token");return{headers:Object(o.a)(Object(o.a)({},t),{},{authorization:a?"Bearer ".concat(a):""})}})),Be=new j.a({link:Ue.concat(Re),cache:new b.a});var Xe=function(){return Object(y.jsx)(m.a,{client:Be,children:Object(y.jsx)(s.a,{children:Object(y.jsx)("div",{children:Object(y.jsxs)(O.a,{store:w,children:[Object(y.jsx)(S,{}),Object(y.jsxs)(l.c,{children:[Object(y.jsx)(l.a,{exact:!0,path:"/",component:le}),Object(y.jsx)(l.a,{path:"/signup",component:be}),Object(y.jsx)(l.a,{path:"/signin",component:le}),Object(y.jsx)(l.a,{path:"/home",component:We}),Object(y.jsx)(l.a,{path:"/goals",component:He}),Object(y.jsx)(l.a,{path:"/habits",component:Ne}),Object(y.jsx)(l.a,{default:!0,component:Oe})]}),Object(y.jsx)(H,{})]})})})})},Fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Le(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(Xe,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");Fe?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Le(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Le(n,e)}))}}()}},[[180,1,2]]]);
//# sourceMappingURL=main.1c38d8a0.chunk.js.map